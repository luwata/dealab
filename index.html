<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Dealabs API</title>
    <link rel="stylesheet" href="css/design.css">
<!--     <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css"> -->
  </head>
  <body>
  
    <script>
      if (typeof module === 'object') {window.module = module; module = undefined;}
    </script>
    <script src="js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script>if (window.module) module = window.module;</script>
    <script>require('./renderer.js')</script>

    <script>

      $.get('https://www.dealabs.com/rss/tout', function (data) {

            document.write("<div class=\"container\">");
            document.write("<div class=\"row deals\" style=\"display:flex; flex-direction: column;\">");

            $(data).find('item').each(
              function()
              {
                var title = $(this).find('title').text();
                var date = $(this).find('pubDate').text();
                var price = $(this).find("pepper\\:merchant, merchant").attr('price');
                var img_url = $(this).find("media\\:content, content").attr('url');
                var description = $(this).find('description').text();
                var deal_url = $(this).find('link').text();

                document.write("<div style=\"width: 90%; margin-bottom: 2rem; text-align: center;\">");
                document.write("<figure style=\"display:flex;\">");
                document.write("<img src='"+img_url+"' style=\"width:auto; height:auto;\" />");
                document.write("<figcaption style=\"text-align: left;\">");
                document.write("<header>");
                document.write("<section>");
                document.write("<h1>"+title+"</h1>");
                document.write("<h2>"+date+"</h2>");
                document.write("</section>");
                document.write("<div>"+price+"</div>");
                document.write("</header>");
                document.write("<main>"+description+"</main>");
                document.write("</figcaption>");
                document.write("</figure>");
                document.write("<a href="+deal_url+">Voir le Deal</a>");
                document.write("</div>");
            });

            document.write("</div>");
            document.write("</div>");

      });

    </script>
  </body>
</html>
